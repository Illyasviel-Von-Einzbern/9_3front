import{am as l,ab as y,r as g,e as k,w as t,o as c,c as r,f as n,q as u,F as V,s as h,ae as d}from"./index-AWgwsy0c.js";import{b as p}from"./route-block-B_A1xBdJ.js";import{V as b}from"./VContainer-DdjiTbVz.js";import{V as v,a as m}from"./VRow-DgrlSwcS.js";import{V as A}from"./VDivider-DMIPa6pT.js";import{V as w}from"./VDataTable-BWFFZXyR.js";import"./VPagination-DoiRKGmI.js";import"./VSelect-C4kuFK5Q.js";import"./VList-Dn2VOZxI.js";import"./VMenu-DoDXjbwU.js";import"./VCheckboxBtn-DDuY08wn.js";import"./VChip-BXeRU_1z.js";import"./filter-C9uyxmCX.js";const x={create(){return l.apiAuth.post("/order")},getMy(){return l.apiAuth.get("/order/my")},getAll(){return l.apiAuth.get("/order/all")}},D={__name:"oldOrders",setup(S){const f=y(),i=g([]),_=[{title:"ID",key:"_id"},{title:"日期",key:"createdAt",value:e=>new Date(e.createdAt).toLocaleString()},{title:"商品",key:"cart",sortable:!1},{title:"總金額",key:"totalPrice",value:e=>e.cart.reduce((a,o)=>a+o.product.price*o.quantity,0)}];return(async()=>{try{const{data:e}=await x.getMy();i.value=e.result}catch(e){console.error("Error fetching orders:",e),f({text:"無法載入訂單資料",snackbarProps:{color:"red"}})}})(),(e,a)=>(c(),k(b,null,{default:t(()=>[r(v,null,{default:t(()=>[r(m,{cols:"12"},{default:t(()=>a[0]||(a[0]=[n("h1",{class:"text-center"},"訂單",-1)])),_:1,__:[0]}),r(A),r(m,{cols:"12"},{default:t(()=>[r(w,{headers:_,items:i.value},{"item.cart":t(({value:o})=>[n("ul",null,[(c(!0),u(V,null,h(o,s=>(c(),u("li",{key:s._id},d(s.product.name)+" - "+d(s.quantity)+" 件 ",1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};typeof p=="function"&&p(D);export{D as default};
