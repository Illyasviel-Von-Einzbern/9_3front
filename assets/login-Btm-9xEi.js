import{_ as w,ab as S,n as y,ag as k,b as h,e as q,w as t,o as B,c as s,f as c,ao as F,h as a,ai as m,V as C,i as M}from"./index-CIHyU37z.js";import{u as N,c as U,a as p,d as f}from"./index.esm-DXda4eDn.js";import{b}from"./route-block-B_A1xBdJ.js";import{V as j}from"./VContainer-Czllfyk0.js";import{V as P,a as g}from"./VRow-BQerUWQv.js";import{V as R}from"./VForm-CGGqa3P4.js";const T={class:"d-flex justify-center mt-4"},V={__name:"login",setup($){const d=S(),_=h(),v=y(),l=N({validationSchema:U({account:p().required("帳號是必填的"),password:p().required("密碼是必填的").min(4,"密碼至少需要 4 個字元").max(20,"密碼最多只能有 20 個字元")})}),n=f("account"),u=f("password"),x=l.handleSubmit(async i=>{var e,o;try{const{data:r}=await k.login({account:i.account,password:i.password});v.login(r.user),d({text:"登入成功！",snackbarProps:{color:"green"}}),_.push("/")}catch(r){console.error(r),d({text:((o=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:o.message)||"登入失敗，請稍後再試！",snackbarProps:{color:"red"}})}});return(i,e)=>(B(),q(j,{class:"mt-10"},{default:t(()=>[s(P,{justify:"center"},{default:t(()=>[s(g,{class:"text-center",cols:"12"},{default:t(()=>e[2]||(e[2]=[c("h1",{class:"d-inline-block h1-border mb-3"},"登入",-1)])),_:1,__:[2]}),s(g,{class:"my-container",cols:"12",lg:"6",md:"8"},{default:t(()=>[s(R,{disabled:a(l).isSubmitting.value,onSubmit:F(a(x),["prevent"])},{default:t(()=>[s(m,{modelValue:a(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(n).value.value=o),"error-messages":a(n).errorMessage.value,label:"帳號",required:""},null,8,["modelValue","error-messages"]),s(m,{modelValue:a(u).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(u).value.value=o),counter:"","error-messages":a(u).errorMessage.value,label:"密碼",maxlength:"20",minlength:"4",required:"",type:"password"},null,8,["modelValue","error-messages"]),c("div",T,[s(C,{loading:a(l).isSubmitting.value,size:"large",type:"submit"},{default:t(()=>e[3]||(e[3]=[M(" 登入 ",-1)])),_:1,__:[3]},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof b=="function"&&b(V);const H=w(V,[["__scopeId","data-v-f8e10dbc"]]);export{H as default};
