import{a as w,b as I}from"./VToolbar-BlAZ4Cry.js";import{p as P,r as A,t as f,v as u,D as R,z as y,y as L,A as k,g as x,P as N,T as H,B as U,Q as z,U as M,u as C,c as F,m as q,a2 as D,E as O}from"./index-AWgwsy0c.js";const Q=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function W(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:v}=b;let d=0,r=0;const e=A(null),s=f(0),o=f(0),h=f(0),p=f(!1),n=f(!1),i=u(()=>Number(l.scrollThreshold)),B=u(()=>R((i.value-s.value)/i.value||0)),m=()=>{const t=e.value;if(!t||v&&!v.value)return;d=s.value,s.value="window"in t?t.pageYOffset:t.scrollTop;const c=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(r!==c){r=c;return}n.value=s.value<d,h.value=Math.abs(s.value-i.value)};return y(n,()=>{o.value=o.value||s.value}),y(p,()=>{o.value=0}),L(()=>{y(()=>l.scrollTarget,t=>{var S;const c=t?document.querySelector(t):window;c&&c!==e.value&&((S=e.value)==null||S.removeEventListener("scroll",m),e.value=c,e.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),k(()=>{var t;(t=e.value)==null||t.removeEventListener("scroll",m)}),v&&y(v,m,{immediate:!0}),{scrollThreshold:i,currentScroll:s,currentThreshold:h,isScrollActive:p,scrollRatio:B,isScrollingUp:n,savedScroll:o}}const Y=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:l=>["top","bottom"].includes(l)},...I(),...D(),...Q(),height:{type:[Number,String],default:64}},"VAppBar"),J=x()({name:"VAppBar",props:Y(),emits:{"update:modelValue":l=>!0},setup(l,b){let{slots:v}=b;const d=A(),r=N(l,"modelValue"),e=u(()=>{var g;const a=new Set(((g=l.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),s=u(()=>{const a=e.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!r.value}),{currentScroll:o,scrollThreshold:h,isScrollingUp:p,scrollRatio:n}=W(l,{canScroll:s}),i=H(()=>e.value.hide||e.value.fullyHide),B=u(()=>l.collapse||e.value.collapse&&(e.value.inverted?n.value>0:n.value===0)),m=u(()=>l.flat||e.value.fullyHide&&!r.value||e.value.elevate&&(e.value.inverted?o.value>0:o.value===0)),t=u(()=>e.value.fadeImage?e.value.inverted?1-n.value:n.value:void 0),c=u(()=>{var T,V;if(e.value.hide&&e.value.inverted)return 0;const a=((T=d.value)==null?void 0:T.contentHeight)??0,g=((V=d.value)==null?void 0:V.extensionHeight)??0;return i.value?o.value<h.value||e.value.fullyHide?a+g:a:a+g});U(()=>!!l.scrollBehavior,()=>{O(()=>{i.value?e.value.inverted?r.value=o.value>h.value:r.value=p.value||o.value<h.value:r.value=!0})});const{ssrBootStyles:S}=z(),{layoutItemStyles:E}=M({id:l.name,order:u(()=>parseInt(l.order,10)),position:H(()=>l.location),layoutSize:c,elementSize:f(void 0),active:r,absolute:H(()=>l.absolute)});return C(()=>{const a=w.filterProps(l);return F(w,q({ref:d,class:["v-app-bar",{"v-app-bar--bottom":l.location==="bottom"},l.class],style:[{...E.value,"--v-toolbar-image-opacity":t.value,height:void 0,...S.value},l.style]},a,{collapse:B.value,flat:m.value}),v)}),{}}});export{J as V};
