import{r as l}from"./restaurant-C2J68YrT.js";import{aV as n}from"./index-CIHyU37z.js";const u=n("restaurant",{state:()=>({restaurants:[],total:0,loading:!1,error:null}),actions:{async fetchAll({search:r="",page:t=1,limit:e=9,category:s=""}){this.loading=!0,this.error=null,console.log("fetchAll 被呼叫，參數:",{search:r,page:t,limit:e,category:s});try{const a={page:t,limit:e};r&&typeof r=="string"&&r.trim()&&(a.q=r.trim()),s&&typeof s=="string"&&s.trim()&&(a.category=s.trim()),console.log("發送給 API 的參數:",a);const o=await l.getAll(a);console.log("API 回傳完整資料:",o),console.log("API 回傳完整資料2:",o.data),this.restaurants=o.data.data||o.data.restaurant||[],this.total=o.data.total||0,console.log("處理後的餐廳資料:",this.restaurants),console.log("總數:",this.total),console.log("~~~~~~~~~~~搜尋參數：",r),console.log("~~~~~~~~~~~~~~~~API 回傳結果：",o.data)}catch(a){this.error=a,console.error("fetchAll 錯誤:",a)}finally{this.loading=!1}},async createRestaurant(r){this.loading=!0,this.error=null;try{const t=await l.create(r);return this.restaurants.push(t.data),t.data}catch(t){throw this.error=t,console.error(t),t}finally{this.loading=!1}},async createMenu(r,t){try{await l.createMenu(r,t)}catch(e){throw console.error("新增菜單失敗",e),e}}}});export{u};
