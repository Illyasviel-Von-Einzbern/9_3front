import{ab as _,n as k,r as m,q as x,c as a,w as o,bj as w,F as C,bk as P,b as S,o as B,f as s,ae as l,a9 as N,V as f,i as v,ag as h}from"./index-CIHyU37z.js";import{p as q}from"./product-D7nYa-s6.js";import{b as g}from"./route-block-B_A1xBdJ.js";import{V as E}from"./VContainer-Czllfyk0.js";import{V as I,a as c}from"./VRow-BQerUWQv.js";import{V as y}from"./VDivider-3u-8eSsr.js";import{V as R}from"./VNumberInput-BTvZFhIm.js";const T={class:"text-center"},j={style:{"white-space":"pre"}},D={__name:"[id]",setup(F){const u=_(),i=S(),d=P(),V=k(),e=m({name:"",price:0,description:"",category:"",sell:!0,image:""});(async()=>{try{const{data:t}=await q.getId(d.params.id);e.value.name=t.product.name,e.value.price=t.product.price,e.value.description=t.product.description,e.value.category=t.product.category,e.value.sell=t.product.sell,e.value.image=t.product.image}catch(t){console.error("Error fetching products:",t),u({text:"無法載入商品資料",snackbarProps:{color:"red"}}),i.push("/")}})();const n=m(1),b=async()=>{try{const{data:t}=await h.cart({product:d.params.id,quantity:n.value});V.cartTotal=t.result,u({text:"已加入購物車",snackbarProps:{color:"green"}})}catch(t){console.error("Error fetching products:",t),u({text:"無法加入購物車",snackbarProps:{color:"red"}}),i.push("/")}};return(t,r)=>(B(),x(C,null,[a(E,null,{default:o(()=>[a(I,null,{default:o(()=>[a(c,{cols:"12"},{default:o(()=>[s("h1",T,l(e.value.name),1)]),_:1}),a(y),a(c,{cols:"12",md:"6"},{default:o(()=>[a(N,{class:"mb-4",contain:"",height:"400",src:e.value.image},null,8,["src"])]),_:1}),a(c,{cols:"12",md:"6"},{default:o(()=>[s("p",null,"分類: "+l(e.value.category),1),s("p",null,"價格: "+l(e.value.price),1),a(y,{class:"my-5"}),s("p",j,l(e.value.description),1),a(R,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=p=>n.value=p),"control-variant":"split",min:1,variant:"outlined"},null,8,["modelValue"]),a(f,{class:"mt-4",color:"primary",disabled:!e.value.sell,onClick:r[1]||(r[1]=p=>b())},{default:o(()=>r[2]||(r[2]=[v(" 加入購物車 ",-1)])),_:1,__:[2]},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(w,{class:"align-center justify-center text-center","model-value":!e.value.sell,opacity:"0.7",persistent:"",scrim:"black"},{default:o(()=>[r[4]||(r[4]=s("h1",null,"已下架",-1)),r[5]||(r[5]=s("p",null,"這個商品已經下架，無法購買。",-1)),a(f,{color:"primary",to:"/"},{default:o(()=>r[3]||(r[3]=[v(" 返回首頁 ",-1)])),_:1,__:[3]})]),_:1,__:[4,5]},8,["model-value"])],64))}};typeof g=="function"&&g(D);export{D as default};
